

人在一起是聚会，心在一起叫团队，大家一起加油！！！

# 1 导言

## **1.1 目的**

 该文档是关于用户对P2P即时通讯软件的要求，重点描述了P2P即时通讯软件的设计需求，将作为对该工具在概要设计阶段的设计输入。

本文档的预期读者是：

* 设计人员
* 开发人员
* 项目管理人员
* 测试人员
* 用户
## **1.2 范围**

 该文档是借助于当前系统的逻辑模型导出目标系统的逻辑模型，解决整个项目系统的“做什么”的问题。在这里，对于开发技术并没有涉及，而主要是通过建立模型的方式来描述用户的需求，为客户、用户、开发方等不同参与方提供一个交流的渠道。

## 1.3 术语定义

无

# 2 系统定义

 我们分别阐述一下项目的来源、背景和项目的目标。

## **2.1 项目来源及背景**

 目前的一些在线即时通讯软件的通讯模式基本上都是服务器模式，聊天记录一般都会通过运营方的服务器传输。经过美国NAS棱镜门事件后，人们开始担心这种模式泄露个人隐私，继而寻求更安全的通讯软件。基于此，我小组对基于P2P的即时通讯软件进行研究与实现。

 点对点技术，也称P2P（Point to point），即数据直接在用户与用户之间传输，依赖网络中参与者的计算能力和带宽，而不是集中在少数几台服务器上，这种技术近年在在线视频方面得到广泛应用。当年布拉姆·科恩就利用这种技术发明了BitTorrent协议，也就是大家熟悉的“BT下载”。

 我们将实现的软件同样是通过这种模式进行通讯，聊天信息直接从客户端发送到另一个客户端，无需依靠中间服务器，这样用户可以在互联网上自由交流，不用担心聊天信息被监控，对个体用户、企业用户而言都是个理想的聊天工具。

## **2.2 项目要达到的目标**

本项目设定的目标如下：

1.  系统能够提供友好的用户界面，使操作人员的工作量最大限度的减少
2. 系统具有良好的运行效率，能够得到提高生产率的目的
3. 系统应有良好的可扩充性，可以容易的加入其它系统的应用。
4. 平台的设计具有一定的超前性，灵活性，能够适应企业生产配置的变化。
5. 通过这个项目可以锻炼队伍，提高团队的开发能力和项目管理能力
## **2.3 系统整体结构**

	根据用户的需求陈述，可以确定本项目分为客户端和管理端，客户端主要功能是提供应聘者的查询职位、简历录入、回答试题，提交简历等。管理端的功能提供公司人力资源管理人员进行的知识库管理、试卷管理、职位管理、简历管理、用户管理等。他们的关系如图A-1。


# 3 应用环境

本项目的应用环境可以分硬件环境、软件环境和网络环境来描述。

## **3.1 系统运行网络环境**

	本系统的网络运行图如图3.1，无论是客户端的应聘者还是管理端的HR等都可以通过网络登录到本系统中。应聘者通过网络提交简历等相关信息，HR通过网络发布职位信息，获得应聘者提供的简历信息，进行面试管理。

![图片](https://uploader.shimo.im/f/fnTdz6bZ1qY31Xgf.png!thumbnail)

                                                        图 3.1 网络拓扑图

	

	

## **3.2 系统运行硬件环境**

本系统的硬件环境如下：

客户机：普通PC

* CPU：P4 1.8GHz
*  内存：256MB以上
*  分辨率：推荐使用1024*768像素

逻辑服务器

*  CPU：P4 1.8GHz
* 内存：256MB以上
* 数据库服务器
*  CPU：P4 1.8GHz
* 内存：256MB以上
## **3.3 系统运行软件环境**

*  操作系统：Windows 10
* 数据库：MYSQL
* 开发工具包：Qt、protobuf
# 4 功能规格

## 4.1 角色（Actor）定义 

角色或者执行者（Actor）指与系统产生交互的外部用户或者外部系统。

### 4.1.1用户 （User）

用户是指在即时通讯软件中通过客户端进行注册、登录、聊天的人员。这个Actor主要参与客户端的联系人增删查改、聊天、消息推送、离线管理等功能。

### 4.1.2管理员（Administrator）

管理用户是指管理端用户，是指在即时通讯软件中，对软件进行管理的人员，主要参与管理端的用户管理功能及发布系统公告。

## 4.2 系统主Use Case图

![图片](https://uploader.shimo.im/f/tryltQIxujfcHKLG.png!thumbnail)

                                                          图4.2-1 客户端系统主用例图

![图片](https://uploader.shimo.im/f/5kDclMqzpkJXTOkg.png!thumbnail)

图4.2-2服务端主用例图

## 4.3 客户端子系统

用户注册后，登录进入即时通讯软件，可进行聊天、对联系人增删查改、群管理以及消息管理的功能操作。

### 4.3.1 登录

用例描述：用户在登录页面通过输入账户和密码登录到软件系统

执行者：用户、管理员

前置条件：已进行注册的用户

后置条件：用户身份权限识别，进入相应功能界面

基本路径：1）输入新的账号和密码

                  2）点击注册

### 4.3.2 注册

用例描述：用户在注册页面通过输入新的账号和密码，选择身份权限进行注册

执行者：用户、管理员

前置条件：未存在账户

后置条件：注册成功跳转到登录界面进行登录

基本路径：1）输入账号和密码

                  2）点击登录

### 4.3.3联系人增删查改

![图片](https://uploader.shimo.im/f/LW8cyPDOQIUGSZHF.png!thumbnail)

图 4.3.3 联系人管理用例图

1. 添加联系人

用例描述：用户查看软件中联系人列表，进行联系人新增操作

执行者：用户

前置条件：已进行登录

后置条件：操作后联系人列表进行更新

基本路径：1）选择联系人列表 

                  2）点击页面右上方“＋号”新增联系人，在文本框输入新增账号

                  3）确定添加，发送验证信息等待对方验证

                  4）添加成功

2. 删除联系人

用例描述：用户可查看软件中联系人列表，进行联系人删除联操作

执行者：用户

前置条件：已进行登录

后置条件：操作后联系人列表进行更新

基本路径：1）选择联系人列表

                  2）点击联系人进入详细信息页面，点击右上方设置选择删除好友

                  3）确定删除

3. 查询联系人

用例描述：用户可查看软件中联系人列表，对联系人详细信息进行查询

执行者：用户

前置条件：已进行登录

后置条件：显示查询联系人详细信息

基本路径：1）选择联系人列表

                  2）搜索框输入要查询的联系人账号

                  3）页面显示查询联系人详细信息

4. 修改联系人

用例描述：用户可查看软件中联系人列表，对联系人详细信息进行修改

执行者：用户

前置条件：已进行登录

后置条件：操作后联系人列表进行更新

基本路径：1）选择联系人列表

                  2）点击联系人进入详细信息界面，点击右上方设置修改信息

                  3）确定修改

1. 好友申请处理

用例描述：由用户决定对好友申请的处理，同意还是拒绝

执行者：用户

前置条件：已进行登录

后置条件：

基本路径：1）选择申请列表

                  2）抉择

### 
### 4.3.4 聊天

![图片](https://uploader.shimo.im/f/g2kZfgM7NzGd4mUw.png!thumbnail)

                                             图4.2.4.1 聊天用例图

1. 单聊

**用例描述：**单聊，即用户选定指定用户，双方进行私密聊天，消息只有双方可见。

**执行者：**用户

**前置条件：**用户已成功登录

**后置条件：**无

**基本路径：**

1)   选择聊天对象

2）编辑消息

3）发送消息

2. 群聊

**用例描述：**选定群，在群内进行聊天，用户发送的消息，群中的所有成员可见。

**执行者：**用户

**前置条件：**用户已成功登录，已加入该群

**后置条件：**无

**基本路径：**

1)   选择聊天群

2）编辑消息

 3）发送消息

### 4.3.5 群管理

![图片](https://uploader.shimo.im/f/3IyQwoOhthyVO5KM.png!thumbnail)

                                                    图4.3.5 群管理用例图

1. 查询群

**   1.1查询未加入群 **

**   用例描述：**对你所想了解的群进行搜索，可以搜索群号或者群名

**   执行者：**用户

**   前置条件：**已经成功登陆的用户

**   后置条件：**查询到相关群

**   基本路径**：

     1）点击搜索按钮

        2）点击找群

        3）输出群号或者群名（若无该群号或者群名则显示不存在该群，反之则显示出相关群）

        4）选择你要查询的群，点击即可查看到该群的信息

   **1.2查询已加入的群**

**      ****用例描述：**查询已经加入的相关群信息，对群信息进行详细了解的操作。

**   执行者：**用户

**   前置条件：**已经加入到该群的用户

**   后置条件：**成功查询该群的详细信息

**   基本路径**：

     1）点击选择想要查询的群

       2）点击右上角的更多（...）符号按钮（在该界面下会有群成员，群聊名称，群公告，聊天记录查询，群屏蔽，退出该群等模块）

       3）选择想要查询的信息

1. 加群

   **   ****用例描述：**用户加入自己所想要加入的群

**   执行者：**用户

**   前置条件：**已经成功登陆的用户

**   后置条件：**成功加入到群

**   基本路径**：

       1）点击搜索按钮

        2）点击找群

        3）输出群号或者群名（若无该群号或者群名则显示不存在该群，反之则显示出相关群）

        4）点击群，进入到群简介，

        5）点击加入按钮，填写验证按钮

        6）点击发送按钮（等待群管理通过，若群管理通过，你已经成功加入到该群，若无消息则表示通过不成功，需要重新加群则重复以上操作即可）

        7）成功加入群

1. 退群

**      ****用例描述：**退出群聊

**   执行者：**用户

**   前置条件：**已经加入到该群的用户

**   后置条件：**用户成功退群

**   基本路径**：

        1）找到想要退出的群，点击进去

        2）点击右上角的更多（...）符号按钮

        3）点击退出按钮（会提示是否退出该群，点击确认即可退出该群，取消则不会退出）

       4）成功退出该群

1. 修改群

**   4.1修改群名  **

**      ****用例描述：**管理员（群主）对群名进行修改的操作

**   执行者：**

**   前置条件：**

**   后置条件：**

**   基本路径**：

### 
### 4.3.6 消息管理

![图片](https://uploader.shimo.im/f/E1NLRj4eX4El7Gfc.png!thumbnail)

                                                            图4.3.6 消息管理用例图

1. 删除指定消息

**用例描述：**根据用户选择删除指定聊天记录

**执行者：**用户

**前置条件：**用户已成功登录

**后置条件：**更新现有消息列表

**基本路径：**

1)  选择要删除记录

2）确认删除

2. 清空所有消息

**用例描述：**删除与某个好友或某个群中的所有聊天记录。

**执行者：**用户

**前置条件：**用户已成功登录

**后置条件：**无

**基本路径：**

1)   选定清空对象

2）清空


## 4.4 服务端子系统

![图片](https://uploader.shimo.im/f/LVnsaADCzZRRbSgi.png!thumbnail)

       图4.4 服务端子系统用例图

### 4.4.0 登录验证

**用例：**处理用户登录，查询数据库比对用户密码

**执行者：**服务器自动执行

**前置条件：**无

**后置条件：**离线消息推送，推送系统消息

**基本路径：**

1)  接收数据

2）查询数据库

3）向客户端发送执行结果

### 4.4.1 注册用户

**用例：**将新注册用户数据写入数据库

**执行者：**服务器自动执行

**前置条件：**无

**后置条件：**无

**基本路径：**

1)  接收数据

2）写数据库

3）向客户端发送执行结果

### 4.4.2 消息推送

![图片](https://uploader.shimo.im/f/w7nxzVVPNaqIxrpl.png!thumbnail)

   图4.4.2 消息推送用例图

1. 用户离线消息推送

**用例：**用户登录后，将用户离线期间接收到的消息发送给用户

**执行者：**服务器自动执行

**前置条件：**用户登录验证成功

**后置条件：**无

**基本路径：**

1)  查询数据库，获取消息

2）向客户端发送消息

2. 系统消息推送

**用例：**系统管理员发布的系统公告，将发送给所有用户登录用户，在有效期内只要用户一登录就会像用户发送消息

**执行者：**服务器自动执行

**前置条件：**用户登录验证成功

**后置条件：**无

**基本路径：**

1)   选择消息

2）向客户端发送消息

### 4.4.3 udp打洞

**用例：**协助用户完成P2P连接

**执行者：**服务器自动执行

**前置条件：**用户登录验证成功

**后置条件：**无

**基本路径：**

1)   查询长连接用户列表

 2）向客户端发送必要信息

## 4.5 管理端子系统

![图片](https://uploader.shimo.im/f/mkbUGVMnAbWi8EfX.png!thumbnail)

### 4.4.1 用户管理

#### 1.添加管理员用户

用例描述：给系统添加新的管理员

执行者：

前置条件：管理员已进行登录

后置条件：操作后用户列表进行更新

基本路径：1）选择审核列表 

                  2）查看用户信息

                  3）审核通过或者不通过

#### 2.查询用户

用例描述：查询用户的个人信息。

执行者：管理员

前置条件：已进行登录

后置条件：查看用户的信息

基本路径：1）选择查询框或查看注册时间

                  2）点击查看个人信息

#### 3.修改用户

用例描述：当用户有违规行为，将用户的账户进行封号处理，或者删除用户

执行者：

前置条件：已进行登录

后置条件：停止账号的使用

基本路径：1）发现违规行为

                  2）违规行为备档

                  3）暂停违规账号的使用

### 4.4.2 发布公告

发布版本更新信息，和重要通知

# 5 性能需求

根据用户对本系统的要求，确定系统在响应时间、可靠性、安全等方面有较高的性能要求。

### 5.1 界面需求

 系统的界面要求如下：

1. 页面内容：主题突出，内容丰富，文字准确，语句通顺；专用术语规范，行文格式统一规范。
1. 导航结构：页面具有明确的导航指示，且便于理解，方便用户使用。
1. 技术环境：页面大小适当,能适应不同的客户需求。
1. 艺术风格：界面、版面形象清新悦目、布局合理,字号大小适宜、字体选择合理，前后一致，美观大方；动与静搭配恰当,动静效果好；色彩和谐自然,与主题内容相协调。
### 5.2 响应时间需求

	无论是客户端和管理端，当用户登录，进行任何操作的时候，系统应该及时的进行反应，反应的时间在3秒以内。系统应能监测出各种非正常情况，如与设备的通信中断，无法连接数据库服务器等，避免出现长时间等待甚至无响应。

### 5.3 可靠性需求

	系统应保证7X24内不当机，保证10000+人可以同时在客户端登录，系统正常运行，正确提示相关内容。

### 5.4 开放性需求

	系统应具有十分的灵活性，以适应将来功能扩展的需求。

### 5.5 可扩展性需求

	系统设计要求能够体现扩展性要求，以适应将来功能扩展的需求。

### 5.6 系统安全性需求

	系统有严格的权限管理功能，各功能模块需有相应的权限方能进入。系统需能够防止各类误操作可能造成的数据丢失，破坏。防止用户非法获取网页以及内容。

# 6 产品提交

 提交产品为：

* 应用系统软件包
* 数据库初始数据
* 系统开发过程文档
* 系统使用维护说明文档

提交方式：CD介质 

# 7 实现约束

系统的实现约束如下：

* 服务器操作系统为 Ubuntu16.4
* 开发平台为：Qt Creater
* 数据库为MYSQL5.7
